<template>
	<view>
			<tui-skeleton v-if="skeletonShow" backgroundColor="#fafafa" borderRadius="10rpx"></tui-skeleton>
			<view>
				<scroll-view class="top-menu-view">
						<block v-for="(menuTab,index) in menuTabs" :key="index">
							<view class="menu-one-view" @click="swichMenu(index)">
								<view :class="[currentTab==index ? 'button' : 'menu-one']">
									<view class="menu-one-txt">{{menuTab.name}}</view>
								</view>
							</view>
						</block>
					</scroll-view>
					<view class="swiper_content">
						<swiper :current="currentTab" class="swiper-box-list" duration="300" @change="swiperChange">
								<swiper-item class="swiper_item">
									<scroll-view class="swiper-one-list" scroll-y="true" @scrolltolower="loadMore(currentTab)">
										<view v-for="(item, index) in myAddList" :key="index" class="uni-flex ed-box">
											<view class="ed-img">
												<image style="width: 120upx;" :src="item.src" mode="widthFix"></image>
											</view>
											<view class="ed-text">
												<view>{{item.title}}</view>
												<view>{{item.content}}</view>
											</view>
										</view>
									</scroll-view>
								</swiper-item>
								<swiper-item>
									<scroll-view class="swiper-one-list" scroll-y="true" @scrolltolower="loadMore(currentTab)">
										<view v-for="(item, index) in foundCList" :key="index" class="uni-flex ed-box" style="justify-content: space-between;">
											<view class="uni-flex">
												<view class="ed-img">
													<image style="width: 120upx;" :src="item.src" mode="widthFix"></image>
												</view>
												<view class="ed-text">
													<view>{{item.title}}</view>
													<view>{{item.content}}</view>
												</view>
											</view>
											<view v-show="item.status === 0" class="add">
												<text>我加入的圈子</text>
											</view>
											<view v-show="item.status === 1" class="add2 uni-flex" @tap="onAdd(item)">
												<image style="width: 25upx;" src="/static/img/community/cricle/2.png" mode="widthFix"></image>
												<text>加入</text>
											</view>
										</view>
									</scroll-view>
								</swiper-item>
							</swiper>
					</view>
				
			</view>
	</view>
</template>

<script>
	import tuiSkeleton from "@/edith_components/tui-skeleton/tui-skeleton"
	export default {
		components:{tuiSkeleton},
		data() {
			return {
				skeletonShow: true,
				menuTabs: [{
					name: '我加入的'
				}, {
					name: '发现圈子'
				}],
				scrollInto: "",
				currentTab: 0,
				myAddList: [{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',

					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
					},

				],
				foundCList: [{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
						status: 0

					},
					{
						src: '/static/img/community/cricle/3.png',
						title: '装修日志',
						content: '123456住友入住',
						status: 1
					},
					{
						src: '/static/img/community/cricle/1.png',
						title: '装修日志',
						content: '123456住友入住',
						status: 1
					},
					{
						src: '/static/img/community/cricle/3.png',
						title: '装修日志',
						content: '123456住友入住',
						status: 1
					},
					{
						src: '/static/img/community/cricle/3.png',
						title: '装修日志',
						content: '123456住友入住',
						status: 1
					},
					{
						src: '/static/img/community/cricle/3.png',
						title: '装修日志',
						content: '123456住友入住',
						status: 1
					}
				],
			}
		},
		onLoad(res) {
			setTimeout(()=>{
				this.skeletonShow = false
			},1000)
			if(res.status == 1){
				this.currentTab = res.status
			}else{
				this.currentTab = 0
			}
		},
		computed: {

		},
		methods: {
			swichMenu: async function(current) {
				if (this.currentTab == current) {
					return false;
				} else {
					this.currentTab = current;
				}
			},
			swiperChange: async function(e) {
				let index = e.target.current;
				this.currentTab = index;
			},
			onAdd: function(item) {
				item.status = 0
				uni.showToast({
					title: '欢迎加入我们，成为圈子住友第123457位加入',
					icon: 'none',
					duration: 2000
				});
			},
			loadMore: function(index) {
			
			},
		}
	}
</script>

<style scoped>
	.content{width:100%;height:100%}
	page{width:100%;height:100%;background:#fff}
	.body-view{flex:1;overflow:hidden;height:100%;width:100%;align-items:flex-start;justify-content:center}
	.top-menu-view{width:100%;height:75upx;margin:0upx 0 10upx 0;text-align:center;background:#fff;border-top:1px solid #eee;position:fixed}
	.top-menu-view .menu-one-view{display:inline-block;white-space:nowrap;height:100%;margin:0 80upx}
	.menu-one-txt{font-size:30upx;margin-bottom:10upx}
	.top-menu-view .menu-one-view .menu-one .menu-one-bottom{position:absolute;bottom:0;width:100%}
	.top-menu-view .menu-one-view .menu-one .menu-one-bottom .menu-one-bottom-color{width:100%;height:5upx}
	.button{border-bottom:2px solid #c17b7d}
	.top-menu-view .menu-one-view .menu-one-act .menu-one-bottom{position:absolute;bottom:0;width:100%;display:flex;justify-content:center}
	.top-menu-view .menu-one-view .menu-one-act .menu-one-bottom .menu-one-bottom-color{width:100%;height:5upx;background:#c17b7d}
	.swiper-box-list{height:100%}
	.swiper-one-list{height:100%;width:100%}
	.add{font-size:24upx;color:#b8b8b8}
	.add2{border-radius:10upx;background:#c17b7d;color:#fff;font-size:24upx;padding:10upx 25upx;align-items:center}
	.add2 image{margin-right:10upx}
	.ed-box{align-items:center;padding:0 0 30upx 0;margin:0 20upx}
	.ed-img{margin-right:20upx}
	.ed-text view{height:60upx;line-height:60upx}
	.ed-text view:first-child{font-size:28upx}
	.ed-text view:last-child{font-size:24upx;color:#b8b8b8}
	.button .menu-one-txt{color:#c17b7d}
	.swiper_content{
		padding-top: 30upx;
		position: fixed;
		left: 0;
		right: 0;
		// #ifdef H5  
		    top: 180upx;
		// #endif
		// #ifdef APP
		    top: 65upx;
		// #endif
		bottom: 0	
	}
</style>
